<div data-ng-controller="secCtrl"></div>

<div flex layout="row" layout-align="center center" layout-padding>
	<div flex-xl="90" flex-lg="90" flex-md="90" flex-sm="90" flex-xs="100" class="md-whiteframe-z3">
		<md-toolbar class="md-warn md-whiteframe-z2">
    		<h2 class="md-toolbar-tools">
      			<span>Código Específicos</span>
      			<div flex></div>
      			<md-button ng-click="fnCanc()"><md-icon md-font-set="material-icons">clear</md-icon></md-button>
    		</h2>
  		</md-toolbar>
  		<md-content>
        	<form name="coesForm" data-ng-submit="fnForm()">
        		<div layout="row" layout-xs="column" layout-sm="column">
        			<div layout="row" layout-xs="column" flex>
        				<md-input-container class="md-block" flex data-ng-show="cntx.form.get('iden').show">
	                		<label>Identificador</label>
							<input type="text" ng-model="cntx.form.get('iden').data" ng-disabled="cntx.form.get('iden').read"/>
	                    </md-input-container>
        			</div>
        		</div>
        		<div layout="row" layout-xs="column" layout-sm="column">
					<div layout="row" layout-xs="column" flex>
	                	<md-input-container class="md-block" flex data-ng-show="cntx.form.get('desc').show">
	                		<label>Descripción</label>
							<input type="text" ng-model="cntx.form.get('desc').data" ng-disabled="cntx.form.get('desc').read"/>
	                    </md-input-container>
					</div>
				</div>
				<div layout="row" layout-xs="column" layout-sm="column">
					<div layout="row" layout-xs="column" flex>
	                    <md-input-container class="md-block" flex data-ng-show="cntx.form.get('tipo').show">
	                    	<label>Tipo</label>
	                        <md-select ng-model="cntx.form.get('tipo').data" ng-disabled="cntx.form.get('tipo').read">
	                        	<md-option ng-repeat="lite in cntx.data.get('ltCoestipo')" ng-value="lite.clav">{{lite.desc}}</md-option>
	                        </md-select>
	                    </md-input-container>
	                    <md-input-container class="md-block" flex data-ng-show="cntx.form.get('favo').show">
	                    	<label>Favorito</label>
	                    	<md-select ng-model="cntx.form.get('favo').data" ng-disabled="cntx.form.get('favo').read">
	                        	<md-option ng-repeat="lite in cntx.data.get('ltLBool')" ng-value="lite.clav">{{lite.desc}}</md-option>
	                        </md-select>
	                    </md-input-container>
					</div>
				</div>
				<div layout="row" layout-xs="column" layout-sm="column">
					<div layout="row" layout-xs="column" flex>
	                	<md-input-container class="md-block" flex data-ng-show="cntx.form.get('cate').show">
	                		<label>Categoría</label>
							<input type="text" ng-model="cntx.form.get('cate').data" ng-disabled="cntx.form.get('cate').read"/>
	                    </md-input-container>
	                    <md-input-container class="md-block" flex data-ng-show="cntx.form.get('cateText').show">
	                		<label>Categoría</label>
							<input type="text" ng-model="cntx.form.get('cateText').data" ng-disabled="cntx.form.get('cateText').read"/>
	                    </md-input-container>
	                	<md-input-container class="md-block" flex data-ng-show="cntx.form.get('conc').show">
	                		<label>Concepto</label>
							<input type="text" ng-model="cntx.form.get('conc').data" ng-disabled="cntx.form.get('conc').read"/>
	                    </md-input-container>
	                    <md-input-container class="md-block" flex data-ng-show="cntx.form.get('concText').show">
	                		<label>Concepto</label>
							<input type="text" ng-model="cntx.form.get('concText').data" ng-disabled="cntx.form.get('concText').read"/>
	                    </md-input-container>
	                    <md-input-container class="md-block">
	                    	<md-button ng-click="fnCate()"><md-icon md-font-set="material-icons">search</md-icon></md-button>
	                    </md-input-container>
					</div>
				</div>
 				<div layout="row" layout-xs="column" layout-sm="column">
					<div layout="row" layout-xs="column" flex>
	                	<md-input-container class="md-block" flex data-ng-show="cntx.form.get('trad').show">
	                		<label>Traducción</label>
							<input type="text" ng-model="cntx.form.get('trad').data" ng-disabled="cntx.form.get('trad').read"/>
	                    </md-input-container>
	                    <md-input-container class="md-block" flex data-ng-show="cntx.form.get('tradText').show">
	                		<label>Traducción</label>
							<input type="text" ng-model="cntx.form.get('tradText').data" ng-disabled="cntx.form.get('tradText').read"/>
	                    </md-input-container>
	                    <md-input-container class="md-block">
	                    	<md-button ng-click="fnTrad()"><md-icon md-font-set="material-icons">search</md-icon></md-button>
	                    </md-input-container>
					</div>
				</div>
				<div layout="row" layout-align="center center">
                    <md-button type="submit" class="md-raised md-primary" aria-label="Aceptar">Aceptar</md-button> 
                </div>
        	</form>
        	<br><br>
			<md-toolbar class="md-warn md-whiteframe-z2">
    			<h2 class="md-toolbar-tools">
      				<span>Contabilidad</span>
      				<div flex></div>
      				<md-button ng-click="fnNuev()"><md-icon md-font-set="material-icons">add</md-icon></md-button>
    			</h2>
  			</md-toolbar>
        	<md-list class="md-dense" flex>
				<md-list-item>
					<div layout="row" layout-xs="column" layout-sm="column" flex="90">
						<div layout="row" flex>
							<div flex="15" show><b>Año Inicio</b></div>
							<div flex="15" show><b>Año Fin</b></div>
							<div flex="30" show><b>Valor</b></div>
							<div flex="15" show><b>Categoria</b></div>
							<div flex="15" show><b>Concepto</b></div>
						</div>
					</div>
					<div flex></div>
					<div flex="10"></div>
					<md-divider></md-divider>
				</md-list-item>
				
				<md-list-item data-ng-repeat="cont in cntx.data.get('contList')" ng-click="clic($index)">
					<div class="md-list-item-text" flex layout="row" style="max-width: 100%"> <!-- TODO: solución general para bloquear los md-list-item-text -->
						<div layout="row" layout-xs="column" layout-sm="column" flex="90">
							<div layout="row" layout-xs="column" flex>
								<!-- Cabecera... la cambiaremos según tamaño de pantalla, igual que las etiquetas -->
								<div flex ng-hide="$index === cntx.conf.get('idx1')">
									<div flex="15" show>{{cont.anin}}</div>
									<div flex="15" show>{{cont.anfi}}</div>
									<div flex="30" show>{{cont.val1}} * {{cont.val2}} * {{cont.val3}}</div>
									<div flex="15" show>{{cont.cate}}</div>
									<div flex="15" show>{{cont.conc}}</div>
								</div>
								<!--  Detalle -->
								<div flex ng-show="$index === cntx.conf.get('idx1')">
									<div flex><b>Año Inicio: </b>{{cont.anin}}</div>
									<div flex><b>Año Fin: </b>{{cont.anfi}}</div>
									<div flex><b>Discriminante 1: </b>{{cont.val1}}</div>
									<div flex><b>Discriminante 2: </b>{{cont.val2}}</div>
									<div flex><b>Discriminante 3: </b>{{cont.val3}}</div>
									<div flex><b>Categoria: </b>{{cont.cate}}</div>
									<div flex><b>Concepto: </b>{{cont.conc}}</div>
								</div>
							</div>
						</div>
						<div flex></div>
						<div flex="5">
							<md-menu md-position-mode="target-right target">
								<md-button aria-label="Acciones" class="md-icon-button" ng-click="openMenu($mdOpenMenu, $event)">
									<md-icon md-font-set="material-icons">home</md-icon>
								</md-button>
								<md-menu-content width="4">
									<md-menu-item>
										<md-button ng-click="fnEdit($index)">
											Editar
										</md-button>
									</md-menu-item>
								</md-menu-content>
							</md-menu>
						</div>
					</div>
					<md-divider ng-if="!$last"></md-divider>
				</md-list-item>
			</md-list>
        </md-content>
    </div>
</div>